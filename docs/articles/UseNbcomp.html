<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Selecting the number of components • bootPLS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Selecting the number of components">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bootPLS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/UseNbcomp.html">Selecting the number of components</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fbertran/bootPLS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Selecting the number of components</h1>
            <h3 data-toc-skip class="subtitle">bootPLS core
functions</h3>
                        <h4 data-toc-skip class="author">Frédéric
Bertrand and Myriam Maumy-Bertrand</h4>
            <address class="author_afil">
      IRMA, labex IRMIA, Université de Strasbourg and CNRS. LIST3N,
Université de technologie de
Troyes.<br><a class="author_email" href="mailto:#"></a><a href="mailto:frederic.bertrand@lecnam.net" class="email">frederic.bertrand@lecnam.net</a>
      </address>
                  
            <h4 data-toc-skip class="date">2025-09-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fbertran/bootPLS/blob/HEAD/vignettes/UseNbcomp.Rmd" class="external-link"><code>vignettes/UseNbcomp.Rmd</code></a></small>
      <div class="d-none name"><code>UseNbcomp.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette is a short tutorial on the use of the core functions of
the <code>bootPLS</code> package.</p>
<p>These functions can also be used to reproduce the simulations and the
figures of the book chapter Magnanensi et al. (2016) and of the two
articles <a href="https://doi.org/10.1007/978-3-319-40643-5_18" class="external-link uri">https://doi.org/10.1007/978-3-319-40643-5_18</a>, Magnanensi
et al. (2017) <a href="https://doi.org/10.1007/s11222-016-9651-4" class="external-link uri">https://doi.org/10.1007/s11222-016-9651-4</a> and Magnanensi
et al. (2021) <a href="https://doi.org/10.3389/fams.2021.693126" class="external-link uri">https://doi.org/10.3389/fams.2021.693126</a>.</p>
</div>
<div class="section level2">
<h2 id="pine-real-dataset-pls-and-spls-regressions">Pine real dataset: pls and spls regressions<a class="anchor" aria-label="anchor" href="#pine-real-dataset-pls-and-spls-regressions"></a>
</h2>
<div class="section level3">
<h3 id="loading-and-displaying-dataset">Loading and displaying dataset<a class="anchor" aria-label="anchor" href="#loading-and-displaying-dataset"></a>
</h3>
<p>Load and display the pinewood worm dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbertran.github.io/bootPLS/">bootPLS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbertran.github.io/plsRglm/" class="external-link">plsRglm</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pine</span>, package <span class="op">=</span> <span class="st">"plsRglm"</span><span class="op">)</span></span>
<span><span class="va">Xpine</span><span class="op">&lt;-</span><span class="va">pine</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="va">ypine</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">pine</span><span class="op">[</span>,<span class="fl">11</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></span><span class="op">(</span><span class="va">pine</span><span class="op">)</span></span></code></pre></div>
<p>Michel Tenenhaus’ reported in his book, <em>La régression PLS</em>
(1998) Technip, Paris, that most of the expert biologists claimed that
this dataset features two latent variables, which is tantamount to the
PLS model having two components.</p>
</div>
<div class="section level3">
<h3 id="pls-loo-and-cv">PLS LOO and CV<a class="anchor" aria-label="anchor" href="#pls-loo-and-cv"></a>
</h3>
<p>Leave one out CV (<code>K=nrow(pine)</code>) one time
(<code>NK=1</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbb</span> <span class="op">&lt;-</span> <span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/cv.plsR.html" class="external-link">cv.plsR</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">x11</span><span class="op">)</span><span class="op">~</span><span class="va">.</span>,data<span class="op">=</span><span class="va">pine</span>,nt<span class="op">=</span><span class="fl">6</span>,K<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pine</span><span class="op">)</span>,NK<span class="op">=</span><span class="fl">1</span>,verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/cvtable.html" class="external-link">cvtable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bbb</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Set up 6-fold CV (<code>K=6</code>), 100 times (<code>NK=100</code>),
and use <code>random=TRUE</code> to randomly create folds for repeated
CV.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbb2</span> <span class="op">&lt;-</span> <span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/cv.plsR.html" class="external-link">cv.plsR</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">x11</span><span class="op">)</span><span class="op">~</span><span class="va">.</span>,data<span class="op">=</span><span class="va">pine</span>,nt<span class="op">=</span><span class="fl">6</span>,K<span class="op">=</span><span class="fl">6</span>,NK<span class="op">=</span><span class="fl">100</span>,verbose<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Display the results of the cross-validation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/cvtable.html" class="external-link">cvtable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bbb2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>Q</mi><mn>2</mn></msup><annotation encoding="application/x-tex">Q^2</annotation></semantics></math>
criterion is recommended in that PLSR setting without missing data. A
model with 1 component is selected by the cross-validation as displayed
by the following figure. Hence the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>Q</mi><mn>2</mn></msup><annotation encoding="application/x-tex">Q^2</annotation></semantics></math>
criterion (1 component) does not agree with the experts (2
components).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/cvtable.html" class="external-link">cvtable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bbb2</span><span class="op">)</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"CVQ2"</span><span class="op">)</span></span></code></pre></div>
<p>As for the CV Press criterion it is unable to point out a unique
number of components.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/cvtable.html" class="external-link">cvtable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bbb2</span><span class="op">)</span><span class="op">)</span>,type<span class="op">=</span><span class="st">"CVPress"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pls-yt-bootstrap">PLS (Y,T) Bootstrap<a class="anchor" aria-label="anchor" href="#pls-yt-bootstrap"></a>
</h3>
<p>The package features our bootstrap based algorithm to select the
number of components in plsR regression. It is implemented with the
<code>nbcomp.bootplsR</code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">4619</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/nbcomp.bootplsR.html">nbcomp.bootplsR</a></span><span class="op">(</span>Y<span class="op">=</span><span class="va">ypine</span>,X<span class="op">=</span><span class="va">Xpine</span>,R <span class="op">=</span><span class="fl">500</span><span class="op">)</span></span></code></pre></div>
<p>The <code>verbose=FALSE</code> option suppresses messages output
during the algorithm, which is useful to replicate the bootstrap
technique. To set up parallel computing, you can use the
<code>parallel</code> and the <code>ncpus</code> options.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">4619</span><span class="op">)</span></span>
<span><span class="va">res_boot_rep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fu"><a href="../reference/nbcomp.bootplsR.html">nbcomp.bootplsR</a></span><span class="op">(</span>Y<span class="op">=</span><span class="va">ypine</span>,X<span class="op">=</span><span class="va">Xpine</span>,R <span class="op">=</span><span class="fl">500</span>,verbose <span class="op">=</span><span class="cn">FALSE</span>,parallel <span class="op">=</span> <span class="st">"multicore"</span>,ncpus <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>It is easy to display the results with the <code>barplot</code>
function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">res_boot_rep</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>A model with two components should be selected using our bootstrap
based algorithm to select the number of components. Hence the number of
component selected with our algorithm agrees with what was stated by the
experts.</p>
</div>
<div class="section level3">
<h3 id="spls-yt-bootstrap">sPLS (Y,T) Bootstrap<a class="anchor" aria-label="anchor" href="#spls-yt-bootstrap"></a>
</h3>
<p>The package also features our bootstrap based algorithm to select,
for a given
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>η</mi><annotation encoding="application/x-tex">\eta</annotation></semantics></math>
value, the number of components in spls regression. It is implemented
with the <code>nbcomp.bootspls</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nbcomp.bootspls.html">nbcomp.bootspls</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Xpine</span>,y<span class="op">=</span><span class="va">ypine</span>,eta<span class="op">=</span><span class="fl">.5</span><span class="op">)</span></span></code></pre></div>
<p>A <code>doParallel</code> and <code>foreach</code> based parallel
computing version of the algorithm is implemented as the
<code>nbcomp.bootspls.para</code> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nbcomp.bootspls.para.html">nbcomp.bootspls.para</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Xpine</span>,y<span class="op">=</span><span class="va">ypine</span>,eta<span class="op">=</span><span class="fl">.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/nbcomp.bootspls.para.html">nbcomp.bootspls.para</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Xpine</span>,y<span class="op">=</span><span class="va">ypine</span>,eta<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.2</span>,<span class="fl">.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bootstrap-yx-for-the-coefficients-with-number-of-components-updated-for-each-resampling">Bootstrap (Y,X) for the coefficients with number of components
updated for each resampling<a class="anchor" aria-label="anchor" href="#bootstrap-yx-for-the-coefficients-with-number-of-components-updated-for-each-resampling"></a>
</h3>
<p>Pinewood worm data reloaded.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbertran.github.io/bootPLS/">bootPLS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbertran.github.io/plsRglm/" class="external-link">plsRglm</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pine</span>, package <span class="op">=</span> <span class="st">"plsRglm"</span><span class="op">)</span></span>
<span><span class="va">Xpine</span><span class="op">&lt;-</span><span class="va">pine</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="va">ypine</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">pine</span><span class="op">[</span>,<span class="fl">11</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">datasetpine</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ypine</span>,<span class="va">Xpine</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/coefs.plsR.adapt.ncomp.html">coefs.plsR.adapt.ncomp</a></span><span class="op">(</span><span class="va">datasetpine</span>,<span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">datasetpine</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Replicate the results to get the bootstrap distributions of the
selected number of components and the coefficients.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fu"><a href="../reference/coefs.plsR.adapt.ncomp.html">coefs.plsR.adapt.ncomp</a></span><span class="op">(</span><span class="va">datasetpine</span>,<span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">datasetpine</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Parallel computing support with the <code>ncpus</code> and
<code>parallel="multicore"</code> options.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/coefs.plsR.adapt.ncomp.html">coefs.plsR.adapt.ncomp</a></span><span class="op">(</span><span class="va">datasetpine</span>,<span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">datasetpine</span><span class="op">)</span><span class="op">)</span>,ncpus<span class="op">=</span><span class="fl">2</span>,parallel<span class="op">=</span><span class="st">"multicore"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fu"><a href="../reference/coefs.plsR.adapt.ncomp.html">coefs.plsR.adapt.ncomp</a></span><span class="op">(</span><span class="va">datasetpine</span>,<span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">datasetpine</span><span class="op">)</span><span class="op">)</span>,ncpus<span class="op">=</span><span class="fl">2</span>,parallel<span class="op">=</span><span class="st">"multicore"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="aze-real-dataset-binary-logistic-plsrglm-and-sgpls-regressions">Aze real dataset: binary logistic plsRglm and sgpls regressions<a class="anchor" aria-label="anchor" href="#aze-real-dataset-binary-logistic-plsrglm-and-sgpls-regressions"></a>
</h2>
<div class="section level3">
<h3 id="plsglr-yt-bootstrap">PLSGLR (Y,T) Bootstrap<a class="anchor" aria-label="anchor" href="#plsglr-yt-bootstrap"></a>
</h3>
<p>Loading the data and creating the data frames.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">aze_compl</span><span class="op">)</span></span>
<span><span class="va">Xaze_compl</span><span class="op">&lt;-</span><span class="va">aze_compl</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">34</span><span class="op">]</span></span>
<span><span class="va">yaze_compl</span><span class="op">&lt;-</span><span class="va">aze_compl</span><span class="op">$</span><span class="va">y</span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">yaze_compl</span>,<span class="va">Xaze_compl</span><span class="op">)</span></span></code></pre></div>
<p>Fitting a logistic PLS regression model with 10 components. You have
to use the family option when fitting the plsRglm.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modplsglm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/plsRglm.html" class="external-link">plsRglm</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">.</span>,data<span class="op">=</span><span class="va">dataset</span>,<span class="fl">10</span>,modele<span class="op">=</span><span class="st">"pls-glm-family"</span>,family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span></code></pre></div>
<p>Perform the bootstrap based algorithm with the
<code>nbcomp.bootplsRglm</code> function. By default 250 resamplings are
carried out.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">4619</span><span class="op">)</span></span>
<span><span class="va">aze_compl.bootYT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="../reference/nbcomp.bootplsRglm.html">nbcomp.bootplsRglm</a></span><span class="op">(</span><span class="va">modplsglm</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Plotting the bootstrap distributions of the coefficients of the
components.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/boxplots.bootpls.html" class="external-link">boxplots.bootpls</a></span><span class="op">(</span><span class="va">aze_compl.bootYT</span><span class="op">)</span></span></code></pre></div>
<p>Computing the bootstrap based confidence intervals of the
coefficients of the components.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/confints.bootpls.html" class="external-link">confints.bootpls</a></span><span class="op">(</span><span class="va">aze_compl.bootYT</span><span class="op">)</span></span></code></pre></div>
<p>Computing the bootstrap based confidence intervals of the
coefficients of the components.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/plots.confints.bootpls.html" class="external-link">plots.confints.bootpls</a></span><span class="op">(</span><span class="fu">plsRglm</span><span class="fu">::</span><span class="fu"><a href="https://fbertran.github.io/plsRglm/reference/confints.bootpls.html" class="external-link">confints.bootpls</a></span><span class="op">(</span><span class="va">aze_compl.bootYT</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sparse-plsglr-yt-bootstrap">sparse PLSGLR (Y,T) Bootstrap<a class="anchor" aria-label="anchor" href="#sparse-plsglr-yt-bootstrap"></a>
</h3>
<p>The package also features our bootstrap based algorithm to select,
for a given
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>η</mi><annotation encoding="application/x-tex">\eta</annotation></semantics></math>
value, the number of components in sgpls regression. It is implemented
in the <code>nbcomp.bootsgpls</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">4619</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">prostate</span>, package<span class="op">=</span><span class="st">"spls"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/nbcomp.bootsgpls.html">nbcomp.bootsgpls</a></span><span class="op">(</span><span class="op">(</span><span class="va">prostate</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">]</span>, <span class="va">prostate</span><span class="op">$</span><span class="va">y</span>, R<span class="op">=</span><span class="fl">250</span>, eta<span class="op">=</span><span class="fl">0.2</span>, typeBCa <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>A <code>doParallel</code> and <code>foreach</code> based parallel
computing version of the algorithm is implemented as the
<code>nbcomp.bootspls.para</code> function.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nbcomp.bootsgpls.para.html">nbcomp.bootsgpls.para</a></span><span class="op">(</span><span class="op">(</span><span class="va">prostate</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">]</span>, <span class="va">prostate</span><span class="op">$</span><span class="va">y</span>, R<span class="op">=</span><span class="fl">250</span>, eta<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.2</span>,<span class="fl">.5</span><span class="op">)</span>, maxnt<span class="op">=</span><span class="fl">10</span>, typeBCa <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Xpine"</span>,<span class="st">"ypine"</span>,<span class="st">"bbb"</span>,<span class="st">"bbb2"</span>,<span class="st">"aze_compl"</span>,<span class="st">"Xaze_compl"</span>,<span class="st">"yaze_compl"</span>,<span class="st">"aze_compl.bootYT"</span>,<span class="st">"dataset"</span>,<span class="st">"modplsglm"</span>,<span class="st">"pine"</span>,<span class="st">"datasetpine"</span>,<span class="st">"prostate"</span>,<span class="st">"res_boot_rep"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Frederic Bertrand, Jeremy Magnanensi, Myriam Maumy-Bertrand.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
